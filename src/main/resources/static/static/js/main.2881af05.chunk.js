(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(89)},44:function(e,t,n){},86:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),o=n(4),r=n.n(o),l=(n(44),n(7)),s=n(8),c=n(11),u=n(9),d=n(12),h=n(6),m=(n(86),function(e){function t(){var e,n;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={visible:!1},n.show=function(){n.setState({visible:!0})},n.hide=function(){n.setState({visible:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.visible,t=[];return t.push(a.a.createElement(h.b,{flat:!0,secondary:!0,swapTheming:!0,onClick:this.hide},"Cancel")),t.push(a.a.createElement(h.b,{flat:!0,primary:!0,swapTheming:!0,onClick:this.hide},"Confirm")),a.a.createElement("div",null,a.a.createElement(h.b,{flat:!0,secondary:!0,swapTheming:!0,onClick:this.show},"Sign In"),a.a.createElement(h.g,{id:"simple-action-dialog",visible:e,onHide:this.hide,actions:t,title:"Sign In"},a.a.createElement(h.l,{id:"Username",placeholder:"Username"}),a.a.createElement(h.l,{id:"password",label:"Enter your password",type:"password"})))}}]),t}(i.PureComponent)),p=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.data.map(function(e){return e.title});return a.a.createElement("div",{className:"md-grid"},a.a.createElement(h.a,{id:"floating-center-title",lineDirection:"center",placeholder:"Search",resize:{min:640,max:1e3},leftIcon:a.a.createElement(h.h,null,"search"),className:"md-cell md-cell--bottom ",data:e,filter:h.a.caseInsensitiveFilter,onAutocomplete:this.props.onAutocomplete,onChange:this.props.onChange}))}}]),t}(i.PureComponent),f=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={visible:!1},n.show=function(){n.setState({visible:!0})},n.hide=function(){n.setState({visible:!1})},n.newPost=function(){n.hide();var e={title:n.titleField.current.value,author:n.authorField.current.value,content:n.contentField.current.value,time:(new Date).getTime()};fetch(n.props.link.href,{method:n.props.link.type,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return console.log(e)}),window.location.reload()},n.titleField=a.a.createRef(),n.authorField=a.a.createRef(),n.contentField=a.a.createRef(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.visible,t=[];return t.push(a.a.createElement(h.b,{flat:!0,primary:!0,swapTheming:!0,onClick:this.hide},"Cancel")),t.push(a.a.createElement(h.b,{flat:!0,secondary:!0,swapTheming:!0,onClick:this.newPost},"Send")),a.a.createElement("div",null,a.a.createElement(h.b,{floating:!0,secondary:!0,onClick:this.show},"add"),a.a.createElement(h.g,{id:"new-blog-post",visible:e,onHide:this.hide,actions:t,title:"New Blog Post",width:500},a.a.createElement(h.l,{id:"title",label:"Title of the post:",required:!0,ref:this.titleField}),a.a.createElement(h.l,{id:"author",label:"Authors name:",required:!0,ref:this.authorField}),a.a.createElement(h.l,{id:"content",label:"Content:",rows:5,required:!0,ref:this.contentField})))}}]),t}(i.PureComponent),g=n(13),b=n.n(g),v=n(16),k=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).show=function(){n.setState({visible:!0})},n.hide=function(){n.setState({visible:!1})},n.like=function(){!1===n.state.disable?(n.doActionByRel("like"),n.setState(function(e){return{likes:e.likes+1,disable:!0}})):n.state.likes>0&&(n.doActionByRel("dislike"),n.setState(function(e){return{likes:e.likes-1,disable:!1}}))},n.postDate=function(){var e=new Date(n.props.time);return e.getHours()+":"+e.getMinutes()+" "+e.getDay()+"."+e.getMonth()+"."+e.getFullYear()},n.getComments=function(){n.setState({isLoading:!0}),n.doActionByRel("comments").then(function(e){return n.setState({comments:e.content,isLoading:!1})})},n.postComment=function(){var e={text:n.textField.current.value};n.doActionByRel("addComment",e).then(function(e){return window.location.reload()})},n.editPost=function(){var e={id:n.props.id,title:n.titleField.current.value,author:n.authorField.current.value,content:n.contentField.current.value,time:(new Date).getTime()};n.doActionByRel("edit",e).then(function(e){return window.location.reload()})},n.deleteBlog=function(){n.doActionByRel("delete").then(function(e){console.log(e),window.location.reload()})},n.textField=a.a.createRef(),n.titleField=a.a.createRef(),n.authorField=a.a.createRef(),n.contentField=a.a.createRef(),n.state={likes:0,disable:!1,expanded:!1,comments:[],isLoading:!1,visible:!1},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"showComments",value:function(){return this.state.isLoading?a.a.createElement(h.e,{expandable:!0,style:{textAlign:"left"}},a.a.createElement("p",null,"Loading ...")):0===this.state.comments.length&&!1===this.state.isLoading?a.a.createElement(h.e,{expandable:!0,style:{textAlign:"left"}},a.a.createElement("p",null,"No comments"),this.makeComment()):a.a.createElement(h.e,{expandable:!0,style:{textAlign:"left"}},this.state.comments.map(function(e){return a.a.createElement("p",{key:e.id},e.text)}),this.makeComment())}},{key:"makeComment",value:function(){return a.a.createElement("div",null,a.a.createElement(h.l,{id:"comment-field",placeholder:"New comment:",ref:this.textField}),a.a.createElement(h.i,{label:""},a.a.createElement(h.b,{flat:!0,secondary:!0,swapTheming:!0,onClick:this.postComment},"Comment")))}},{key:"render",value:function(){var e=[];return e.push(a.a.createElement(h.b,{flat:!0,primary:!0,swapTheming:!0,onClick:this.hide},"Cancel")),e.push(a.a.createElement(h.b,{flat:!0,secondary:!0,swapTheming:!0,onClick:this.editPost},"Edit")),a.a.createElement("div",null,a.a.createElement(h.c,{style:{minWidth:500,maxWidth:640,marginBottom:20},className:"md-block-centered",onExpanderClick:this.getComments},a.a.createElement(h.f,{style:{textAlign:"left"},title:this.props.title,subtitle:"By: "+this.props.author+" - "+this.postDate()}),a.a.createElement(h.e,{style:{textAlign:"left"}},a.a.createElement("p",null,this.props.content)),a.a.createElement(h.d,{expander:!0},a.a.createElement("p",{style:{margin:"0px",paddingLeft:"8px",paddingRight:"8px"}},this.props.likes+this.state.likes),a.a.createElement(h.b,{icon:!0,secondary:this.state.disable,swapTheming:!0,onClick:this.like},"favorite"),a.a.createElement(h.k,{id:this.props.id+"Menu",icon:!0,swapTheming:!0,menuItems:[a.a.createElement(h.j,{key:1,primaryText:"Modify",onClick:this.show}),a.a.createElement(h.j,{key:2,primaryText:"Delete",onClick:this.deleteBlog})],centered:!0},"more_vert")),this.showComments()),a.a.createElement(h.g,{id:"new-blog-post",visible:this.state.visible,onHide:this.hide,actions:e,title:"Edit Blog Post"},a.a.createElement(h.l,{id:"title",label:"Title of the post:",required:!0,defaultValue:this.props.title,ref:this.titleField}),a.a.createElement(h.l,{id:"author",label:"Authors name:",required:!0,defaultValue:this.props.author,ref:this.authorField}),a.a.createElement(h.l,{id:"content",label:"Content:",rows:5,required:!0,defaultValue:this.props.content,ref:this.contentField})))}},{key:"doActionByRel",value:function(){var e=Object(v.a)(b.a.mark(function e(t,n){var i,a,o,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof(i=this.props.links.find(function(e){return e.rel===t}))){e.next=3;break}throw new Error("Invalid argument provided: rel");case 3:if("undefined"!==typeof n){e.next=20;break}return e.next=6,fetch(i.href,{method:i.type});case 6:return a=e.sent,console.log(a),e.prev=8,e.next=11,a.json();case 11:o=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),o={};case 17:return e.abrupt("return",o);case 20:return e.next=22,fetch(i.href,{method:i.type,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 22:return r=e.sent,e.next=25,r.json();case 25:return e.abrupt("return",e.sent);case 26:case"end":return e.stop()}},e,this,[[8,14]])}));return function(t,n){return e.apply(this,arguments)}}()}]),t}(i.PureComponent),E=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.data?this.props.data.map(function(t){return a.a.createElement("div",{key:t.id},a.a.createElement(k,{id:t.id,title:t.title,author:t.author,content:t.content,time:t.time,likes:t.likes,links:t.links,likeAction:e.onLikeActionBuilder(t),dislikeAction:e.onDislikeActionBuilder(t)}))}):this.props.singlePost?a.a.createElement("div",{key:this.props.singlePost.id},a.a.createElement(k,{id:this.props.singlePost.id,title:this.props.singlePost.title,author:this.props.singlePost.author,content:this.props.singlePost.content,time:this.props.singlePost.time,likes:this.props.singlePost.likes,likeAction:this.onLikeActionBuilder(this.props.singlePost),dislikeAction:this.onDislikeActionBuilder(this.props.singlePost)})):void 0}},{key:"onDislikeActionBuilder",value:function(e){var t=e.links.find(function(e){return"dislike"===e.rel});return function(){fetch(t.href,{method:"post",mode:"no-cors"})}}},{key:"onLikeActionBuilder",value:function(e){var t=e.links.find(function(e){return"like"===e.rel});return function(){fetch(t.href,{method:"post",mode:"no-cors"})}}}]),t}(i.PureComponent),y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).show=function(){n.setState({visible:!0})},n.hide=function(){n.setState({visible:!1})},n.onAutocomplete=function(e){var t=!0,i=!1,a=void 0;try{for(var o,r=n.state.posts[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var l=o.value;l.title===e&&n.setState({post:l})}}catch(s){i=!0,a=s}finally{try{t||null==r.return||r.return()}finally{if(i)throw a}}n.show()},n.onChange=function(e){""===e&&n.hide()},n.state={posts:null,visible:!1,post:null,createPostLink:null},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/posts/",{mode:"no-cors",method:"GET"}).then(function(e){return e.json()}).then(function(t){return e.setState({posts:t.content})}),fetch("/api/",{mode:"no-cors",method:"GET"}).then(function(e){return e.json()}).then(function(t){return e.setState({createPostLink:t.links.find(function(e){return"createPost"===e.rel})})})}},{key:"render",value:function(){return this.state.posts?this.state.visible?a.a.createElement("div",{className:"App"},a.a.createElement(h.m,{themed:!0,title:"Blogging site",children:a.a.createElement(p,{data:this.state.posts,onAutocomplete:this.onAutocomplete,onChange:this.onChange}),actions:a.a.createElement(m,null)}),a.a.createElement("div",{className:"md-grid"},a.a.createElement(f,{link:this.state.createPostLink})),a.a.createElement(E,{singlePost:this.state.post})):a.a.createElement("div",{className:"App"},a.a.createElement(h.m,{themed:!0,title:"Blogging site",children:a.a.createElement(p,{data:this.state.posts,onAutocomplete:this.onAutocomplete,onChange:this.onChange}),actions:a.a.createElement(m,null)}),a.a.createElement("div",{className:"md-grid"},a.a.createElement(f,{link:this.state.createPostLink})),a.a.createElement(E,{data:this.state.posts})):a.a.createElement("div",{className:"App"},a.a.createElement(h.m,{themed:!0,title:"Blogging site",actions:a.a.createElement(m,null)}),a.a.createElement("div",{className:"md-grid"},a.a.createElement(f,{link:this.state.createPostLink})),a.a.createElement("p",null,"Loading ..."))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=n(38);n.n(w).a.load({google:{families:["Roboto:300,400,500,700","Material Icons"]}}),r.a.render(a.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.2881af05.chunk.js.map